name : 10 - Controlling the Execution Flow

on:
    workflow_dispatch:
        inputs:
            pass-unit-tests:
                description: 'Whether unit tests should pass or not'
                type: boolean
                default: true
    
jobs:
    lint-build: 
        runs-on: ubuntu-latest
        steps : 
           - name : Lint and Build
             run : |
                echo "Linting the code..."
                echo "Building the project..."
    unit-test:
        runs-on: ubuntu-latest
        continue-on-error: true
        steps : 
          - name : Run Unit Tests
            run : |
                if [ "${{ github.event.inputs.pass-unit-tests }}" = "true" ]; then
                    echo "All unit tests passed!"
                else
                    echo "Some unit tests failed!"
                    exit 1
                fi
    deploy-nonprod: 
        runs-on: ubuntu-latest
        needs: 
            - lint-build
            - unit-test
        steps :
            - name : Deploy to Non-Production
              run : |
                echo "Deploying to non-production environment..."
    e2e-tests:
        runs-on: ubuntu-latest
        needs: 
            - deploy-nonprod
        steps :
          - name : Run End-to-End Tests
            run : |
                echo "Running end-to-end tests..."
                echo "All end-to-end tests passed!"
    deploy-prod:
        runs-on: ubuntu-latest
        needs:
            - e2e-tests
        steps :
            - name : Deploy to Production
              run : |
                    echo "Deploying to production environment..."   
